<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TipiSwap</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <!-- Top bar -->
  <header class="topbar">
    <div class="brand">
      <img id="brandLogo" class="brand__logo" src="/assets/logo.png" alt="TipiSwap" />
      <div class="brand__name">TipiSwap</div>
    </div>

    <div class="topbar__right">
      <div class="pill" id="pillNetwork" title="IoTeX Testnet">
        <span class="dot" id="netDot"></span>
        <span id="networkName">IoTeX Testnet</span>
        <span class="chev">▼</span>
      </div>

      <button id="btnConnectTop" class="btn btn-primary" type="button">Connect Wallet</button>
      <button id="btnDisconnect" class="btn btn-ghost btn-sm" type="button" style="display:none;">Disconnect</button>
    </div>
  </header>

  <!-- Background -->
  <div class="bg"></div>

  <!-- Main card -->
  <main class="wrap">
    <section class="card">
      <div class="card__head">
        <div>
          <div class="card__title">TipiSwap</div>
          <div class="card__sub">
            <span id="walletStatus">Not connected</span>
            <span class="sep">•</span>
            <span id="balancesLine">TPI: 0 | TXI: 0</span>
          </div>
        </div>

        <button id="btnReset" class="btn btn-ghost" type="button">Reset</button>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button id="tabSwap" class="tab tab--active" type="button">Swap</button>
        <button id="tabLiquidity" class="tab" type="button">Liquidity</button>
        <button id="tabFaucet" class="tab" type="button">Faucet</button>
      </div>

      <!-- Swap panel -->
      <div id="panelSwap" class="panel">
        <div class="field">
          <div class="label">From</div>
          <div class="inputRow">
            <input id="fromAmount" class="input" placeholder="0.0" inputmode="decimal" />
            <select id="fromTokenSel" class="select tokenSelect">
              <option value="TPI" selected>TPI</option>
              <option value="TXI">TXI</option>
            </select>
          </div>
          <div class="hint">Balance: <span id="fromBal">0</span></div>
        </div>

        <div class="swapMid">
          <button id="btnFlip" class="iconBtn" title="Flip" type="button">↕</button>
        </div>

        <div class="field">
          <div class="label">To (estimated)</div>
          <div class="inputRow">
            <input id="toAmount" class="input" placeholder="0.0" disabled />
            <select id="toTokenSel" class="select tokenSelect">
              <option value="TXI" selected>TXI</option>
              <option value="TPI">TPI</option>
            </select>
          </div>
          <div class="hint">Balance: <span id="toBal">0</span></div>
        </div>

        <div class="row2">
          <div class="small">Pool: <span id="swapPoolLine">—</span></div>

          <div class="slip">
            <span class="small">Slippage</span>
            <select id="slippageSel" class="select">
              <option value="auto">Auto: 0.50%</option>
              <option value="0.1">0.10%</option>
              <option value="0.5" selected>0.50%</option>
              <option value="1">1.00%</option>
              <option value="2">2.00%</option>
            </select>
          </div>
        </div>

        <div class="row2" style="margin-top:8px;">
          <div class="small">Rate: <span id="rateLine">—</span></div>
        </div>

        <button id="btnSwap" class="btn btn-primary btn-big" type="button">Swap</button>
        <div id="swapMsg" class="msg"></div>

        <div class="small muted" style="margin-top:10px;">
          Note: Only TPI ↔ TXI is supported.
        </div>
      </div>

      <!-- Liquidity panel -->
      <div id="panelLiquidity" class="panel hidden">
        <div class="faucetTitle">Liquidity</div>
        <div class="small muted">Select a pool, add/remove liquidity. Ratio auto-fills.</div>

        <div class="field">
          <div class="label">Pool</div>
          <select id="liqPoolSel" class="select">
            <option value="TPI_TXI" selected>TPI / TXI</option>
          </select>
        </div>

        <div class="row2">
          <div class="small">Pool ratio: <span id="liqRatio">—</span></div>
          <div class="small">Your LP shares: <span id="lpSharesLine">—</span></div>
        </div>

        <div class="field" style="margin-top:10px;">
          <div class="label" id="liqALabel">Token A amount</div>
          <div class="inputRow">
            <input id="liqAAmount" class="input" placeholder="0.0" inputmode="decimal" />
            <span class="tokenTag" id="liqATag">TPI</span>
          </div>
          <div class="hint">Balance: <span id="liqABal">0</span></div>
        </div>

        <div class="field">
          <div class="label" id="liqBLabel">Token B amount</div>
          <div class="inputRow">
            <input id="liqBAmount" class="input" placeholder="0.0" inputmode="decimal" />
            <span class="tokenTag" id="liqBTag">TXI</span>
          </div>
          <div class="hint">Balance: <span id="liqBBal">0</span></div>
        </div>

        <div class="small" id="liqPreview" style="margin-top:6px;">You will add: —</div>

        <button id="btnAddLiquidity" class="btn btn-primary btn-big" type="button">Add Liquidity</button>

        <div class="field" style="margin-top:12px;">
          <div class="label">Remove (by LP shares)</div>
          <div class="inputRow">
            <input id="liqRemoveShares" class="input" placeholder="0.0" inputmode="decimal" />
            <span class="tokenTag">SHARES</span>
          </div>
          <div class="hint">Tip: use max shares from “Your LP shares”.</div>
        </div>

        <button id="btnRemoveLiquidity" class="btn btn-ghost btn-big" type="button">Remove Liquidity</button>

        <div id="liqMsg" class="msg"></div>
      </div>

      <!-- Faucet panel -->
      <div id="panelFaucet" class="panel hidden">
        <div class="faucetTitle">Faucet</div>
        <div class="small muted">Claim 100 tokens per click (cooldown per token).</div>

        <div class="faucetBtns" style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="btnClaimTPI" class="btn btn-primary" type="button">Claim 100 TPI</button>
          <button id="btnClaimTXI" class="btn btn-primary" type="button">Claim 100 TXI</button>
        </div>

        <div id="faucetMsg" class="msg"></div>

        <div class="small muted" style="margin-top:10px;">
          On IoTeX Testnet, gas is paid in IOTX.
        </div>
      </div>
    </section>
  </main>

  <script src="/config.js"></script>
  <script type="module" src="/script.js"></script>
</body>
</html>